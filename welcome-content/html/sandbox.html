<div style="border: 1px solid; height: 100px;">
    <div>
        <label for="system-status">System Status</label>
        <select id="system-status">
          <option value="out_of_service">Out Of Service</option>
          <option value="offline">Offline</option>
          <option value="unreliable">Unreliable</option>
          <option value="alarm">Alarm</option>
          <option value="normal">Normal</option>
      </select>
    </div>
    <div>
        <label for="binary-value">Binary Value1</label>
        <select id="binary-value">
          <option value="0">Off</option>
          <option value="1" selected>On</option>
        </select>
        <label for="binary-value">Binary Value2</label>
        <select id="binary-value-2">
          <option value="0">Off</option>
          <option value="1" selected>On</option>
        </select>
    </div>
    <div>
        <label for="analog-value">Analog Value</label>
        <input id="analog-value" type="text"></input>
    </div>
    <div>
        <label for="just-text">Just Text</label>
        <input id="just-text" type="text" value="Just Text" />
    </div>
</div>

<div style="border: 1px solid;">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 3840 2160">
    <!-- Библиотека -->
    <defs id="svg-definition">
    		<style>
    		.black{fill:#000000;}
    		.vent_yellow{fill:#FFFF00;}
    		.vent_gray{fill:#838383;}
    		.vent_green{fill:#32CD32;}

        svg{background:#2F2F2D;}
    		.black{fill:#000000;}
    		.dnGray{fill:#A7A7A5; stroke:#212120;}
    		.dnGeen{fill:#93f630; stroke:#5a991b;}
    		.prYellow{stroke:#ffd200;}
    		.prRed{stroke:#ff0000;}
    		.prGray{stroke:#A7A7A5;}

        .outOfService{fill:#FFFF00; stroke:#FFFF00;}
    		.overridden{fill:#FFFF00;  stroke:#FFFF00;}
    		.offline{fill:#595959; stroke:#595959;}
    		.nan{fill:#595959; stroke:#595959;}
    		.unreliable{fill:#595959; stroke:#595959;}
    		.normal{fill:#32CD32; stroke:#32CD32;}
    		.off{fill:#595959; stroke:#595959;}
    		.on{fill:#32CD32; stroke:#32CD32;}
    		.alarm{fill:#ff0000; stroke:#ff0000;}

        .hide{display:none;}

    		</style>
    </defs>

    <defs>
      <!-- Вентилятор и лопасти -->
      <visiobas src="/svg/components/fan.svg"/>
    </defs>

    <defs>
      <!-- Знак аварии -->
      <visiobas src="/svg/components/alarm.icon.svg"/>
    </defs>

    <defs>
      <!-- Приямок -->
      <visiobas src="/svg/components/priamok.svg"/>
    </defs>

    <defs>
      <!-- Насос -->
      <visiobas src="/svg/components/pump.svg"/>
    </defs>

    <!-- Конец библиотеки -->
    <!-- Элементы на странице -->
    <!-- Вентилятор на странице -->
    <g addr="L960B17/TRUNK.SUB-24.Parameters.DA_2402" cursor="pointer">
    	<visiobas src="/svg/components/fan.animation.svg"/>
    </g>

    <visiobas timer="100">
      <![CDATA[
        let value = VB.Read("L960B17/TRUNK.SUB-24.Parameters.DA_2402.85");

        if (value == 0) {
          VB.Attr("[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2402'] animateTransform", "dur", "0");
          VB.Attr("[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2402'] animateTransform", "to", "0 70 82.5");
        } else {
          VB.Attr("[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2402'] animateTransform", "dur", "2s");
          VB.Attr("[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2402'] animateTransform", "to", "360 70 82.5");
        }

        let status = VB.Read("L960B17/TRUNK.SUB-24.Parameters.DA_2402.112");

        switch (status) {
          case "out_of_service": {
            VB.Attr("[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2402'] use", "class", "outOfService");
            break;
          }
          case "offline": {
            VB.Attr("[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2402'] use", "class", "offline");
            break;
          }
          case "unreliable": {
            VB.Attr("[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2402'] use", "class", "unreliable");
            break;
          }
          case "alarm": {
            VB.Attr("[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2402'] use", "class", "alarm");
            break;
          }
          case "normal": {
            VB.Attr("[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2402'] use", "class", "normal");
            break;
          }
        }
      ]]>
    </visiobas>

    <g addr="L960B17/TRUNK.SUB-24.Parameters.DA_2403" transform="translate(0, 150)">
      <visiobas src="/svg/components/priamok.animation.svg"/>
    </g>

    <visiobas interval="100">
      <![CDATA[
      let valuePump1 = VB.Read("L960B17/TRUNK.SUB-24.Parameters.DA_2403.85");
      let valuePump2 = VB.Read("L960B17/TRUNK.SUB-24.Parameters.DA_2404.85");
      let status = VB.Read("L960B17/TRUNK.SUB-24.Parameters.DA_2402.112");

      console.log("valuePump1: " + valuePump1 + " valuePump2: " + valuePump2 + " status: " + status);

      //water level animation
      if (valuePump1 == 0 && valuePump2 == 0) {
        VB.Attr("g[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2403'] g .amin animateTransform[type='translate']", "to", "0 -52.8");
        VB.Attr("g[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2403'] g .amin animateTransform[type='scale']", "to", "1 1.6");
      } else {
        VB.Attr("g[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2403'] g .amin animateTransform[type='translate']", "to", "0 62");
        VB.Attr("g[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2403'] g .amin animateTransform[type='scale']", "to", "1 0.3");
      }

      if (status == "normal") {
        VB.Attr("g[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2403'] g .rama use", "class", "nan");

        if (valuePump1 == 1) {
          VB.Attr("g[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2403'] g .pump .pump1 use", "class", "normal");
          VB.Attr("g[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2403'] g .pump .pump1 animate", "from", "none");
        } else if (valuePump1 == 0) {
          VB.Attr("g[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2403'] g .pump .pump1 use", "class", "normal");
          VB.Attr("g[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2403'] g .pump .pump1 animate", "from", "block");
        }

        if (valuePump2 == 1) {
          VB.Attr("g[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2403'] g .pump .pump2 use", "class", "normal");
          VB.Attr("g[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2403'] g .pump .pump2 animate", "from", "none");
        } else if (valuePump2 == 0) {
          VB.Attr("g[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2403'] g .pump .pump2 use", "class", "normal");
          VB.Attr("g[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2403'] g .pump .pump2 animate", "from", "block");
        }

      } else if (status == "out_of_service") {
        VB.Attr("g[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2403'] g .rama use", "class", "nan");

        if (valuePump1 == 1) {
          VB.Attr("g[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2403'] g .pump .pump1 use", "class", "outOfService");
          VB.Attr("g[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2403'] g .pump .pump1 animate", "from", "none");
        } else if (valuePump1 == 0) {
          VB.Attr("g[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2403'] g .pump .pump1 use", "class", "outOfService");
          VB.Attr("g[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2403'] g .pump .pump1 animate", "from", "block");
        }

        if (valuePump2 == 1) {
          VB.Attr("g[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2403'] g .pump .pump2 use", "class", "outOfService");
          VB.Attr("g[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2403'] g .pump .pump2 animate", "from", "none");
        } else if (valuePump2 == 0) {
          VB.Attr("g[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2403'] g .pump .pump2 use", "class", "outOfService");
          VB.Attr("g[addr='L960B17/TRUNK.SUB-24.Parameters.DA_2403'] g .pump .pump2 animate", "from", "block");
        }
      }

      ]]>
    </visiobas>

  </svg>
</div>
